---
layout: base.njk
title: "Burial Records"
description: "Complete listing of burial records from Templecurraheen Graveyard"
---

<div class="mb-8">
    <h1 class="text-3xl font-serif mb-4">Burial Records</h1>
    <p class="text-stone-600 mb-6">
        Our database contains {{ burialList.length }} documented burials from the historic Templecurraheen Graveyard. Records are continuously updated as new information becomes available through ongoing research and community contributions.
    </p>
    
    <div class="mobile-controls mb-6">
        <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-0">
            <button onclick="sortAlphabetical()" class="btn btn-secondary w-full sm:w-auto">Sort A-Z</button>
            <button onclick="sortByDate()" class="btn btn-secondary w-full sm:w-auto">Sort by Date</button>
            <button onclick="sortByRow()" class="btn btn-secondary w-full sm:w-auto">Sort by Row</button>
        </div>
        <div class="mt-3 sm:mt-0 sm:flex-grow">
            <input type="text" id="searchInput" placeholder="Search by name..." 
                   class="w-full px-3 sm:px-4 py-2 border border-stone-300 rounded-md focus:outline-none focus:ring-2 focus:ring-stone-500 text-sm sm:text-base">
        </div>
    </div>
</div>

<!-- Burial List Table -->
<div class="overflow-x-auto">
    <table class="w-full border-collapse">
        <thead class="bg-stone-100 dark:bg-gray-800">
            <tr>
                <th class="text-left p-3 border-b border-stone-300 dark:border-gray-600 font-semibold text-stone-800 dark:text-white">Grave Code</th>
                <th class="text-left p-3 border-b border-stone-300 dark:border-gray-600 font-semibold text-stone-800 dark:text-white">Last Name</th>
                <th class="text-left p-3 border-b border-stone-300 dark:border-gray-600 font-semibold text-stone-800 dark:text-white">First Name</th>
                <th class="text-left p-3 border-b border-stone-300 dark:border-gray-600 font-semibold text-stone-800 dark:text-white">Death Date</th>
                <th class="text-left p-3 border-b border-stone-300 dark:border-gray-600 font-semibold text-stone-800 dark:text-white">Image</th>
            </tr>
        </thead>
        <tbody>
            {% for burial in burialList %}
            <tr class="burial-row hover:bg-stone-50 dark:hover:bg-gray-700 cursor-pointer transition-colors" 
                data-name="{{ burial.fullName | lower }}" 
                data-date="{{ burial.deathDate }}"
                data-lastname="{{ burial.lastName | lower }}"
                data-firstname="{{ burial.firstName | lower }}"
                data-rowcode="{{ burial.rowCode }}"
                data-filename="{{ burial.fileName }}"
                data-fullname="{{ burial.fullName }}"
                data-gravecode="{{ burial.graveCode }}"
                data-plotcode="{{ burial.plotCode }}"
                data-age="{{ burial.age }}"
                data-namesonheadstone="{{ burial.namesOnHeadstone }}"
                data-stoneinscription="{{ burial.stoneInscription }}"
                data-stonedesign="{{ burial.stoneDesign }}"
                data-headstoneshape="{{ burial.headstoneShape }}"
                data-burialdate="{{ burial.burialDate }}"
                data-months="{{ burial.months }}"
                data-status="{{ burial.status }}"
                data-occupation="{{ burial.occupation }}"
                data-address="{{ burial.address }}"
                data-witness="{{ burial.witness }}"
                data-comments="{{ burial.comments }}"
                onclick="openBurialModal(this)">
                <td class="p-3 border-b border-stone-200 dark:border-gray-600">
                    {% set combinedCode = '' %}
                    {% if burial.rowCode %}{% set combinedCode = combinedCode + burial.rowCode %}{% endif %}
                    {% if burial.graveCode %}{% set combinedCode = combinedCode + burial.graveCode %}{% endif %}
                    {% if burial.plotCode %}{% set combinedCode = combinedCode + burial.plotCode %}{% endif %}
                    {% if combinedCode %}
                        <span class="inline-flex items-center">
                            {% if burial.rowCode %}
                                <span class="inline-block px-2 py-1 rounded font-semibold text-stone-800" 
                                      {% if burial.rowCodeColor %}style="background-color: {{ burial.rowCodeColor }};"{% endif %}>
                                    {{ combinedCode }}
                                </span>
                            {% else %}
                                <span class="text-stone-800 dark:text-white font-medium">{{ combinedCode }}</span>
                            {% endif %}
                        </span>
                    {% else %}
                        <span class="text-stone-400">-</span>
                    {% endif %}
                </td>
                <td class="p-3 border-b border-stone-200 dark:border-gray-600 text-stone-800 dark:text-white font-medium">
                    {% if burial.lastName %}
                        {{ burial.lastName }}
                    {% else %}
                        <span class="text-stone-400">-</span>
                    {% endif %}
                </td>
                <td class="p-3 border-b border-stone-200 dark:border-gray-600 text-stone-800 dark:text-white font-medium">
                    {% if burial.firstName %}
                        {{ burial.firstName }}
                    {% else %}
                        <span class="text-stone-400">-</span>
                    {% endif %}
                </td>
                <td class="p-3 border-b border-stone-200 dark:border-gray-600 text-stone-600 dark:text-gray-300">
                    {% if burial.deathDate and burial.deathDate != 'Awaited' %}
                        {{ burial.deathDate }}
                    {% else %}
                        <span class="text-stone-400">Unknown</span>
                    {% endif %}
                </td>
                <td class="p-3 border-b border-stone-200 dark:border-gray-600 text-stone-600 dark:text-gray-300">
                    {% if burial.fileName %}
                        <svg class="w-5 h-5 inline-block text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                    {% else %}
                        <span class="text-stone-400">-</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Burial Modal -->
<div id="burialModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
    <div class="bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <!-- Modal Header -->
        <div class="flex justify-between items-center p-6 border-b border-stone-200 dark:border-gray-600">
            <h2 id="modalTitle" class="text-2xl font-serif text-stone-800 dark:text-white"></h2>
            <button onclick="closeBurialModal()" 
                    class="text-stone-400 hover:text-stone-600 dark:text-gray-400 dark:hover:text-gray-200 text-2xl font-bold">
                ×
            </button>
        </div>
        
        <!-- Modal Content -->
        <div class="p-6">
            <div id="modalContent" class="space-y-4">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>
</div>

<div class="mt-12 bg-stone-100 dark:bg-gray-800 rounded-lg p-6">
    <h2 class="text-xl font-serif mb-4">About These Records</h2>
    <p class="text-stone-600 dark:text-gray-300 mb-4">
        This burial list represents ongoing research into the historic Templecurraheen Graveyard. Records include information from headstone inscriptions, parish records, and local historical documentation.
    </p>
    <div class="grid md:grid-cols-2 gap-4 text-sm text-stone-600 dark:text-gray-300">
        <div>
            <h3 class="font-semibold mb-2">Record Information</h3>
            <ul class="space-y-1">
                <li>• Grave locations use a grid reference system</li>
                <li>• Ages and dates from headstone inscriptions</li>
                <li>• Some records may be incomplete due to weathering</li>
            </ul>
        </div>
        <div>
            <h3 class="font-semibold mb-2">Contribute Information</h3>
            <ul class="space-y-1">
                <li>• Know additional family details?</li>
                <li>• Have photos of headstones?</li>
                <li>• Found errors or omissions?</li>
            </ul>
            <p class="mt-2">
                <a href="/about/" class="text-stone-700 hover:text-stone-900 dark:text-purple-400 dark:hover:text-purple-300 underline">Contact us to contribute</a>
            </p>
        </div>
    </div>
</div>

<script>
function sortAlphabetical() {
    const tbody = document.querySelector('tbody');
    const rows = Array.from(tbody.children);
    
    rows.sort((a, b) => {
        // Sort by last name, then first name if last names are equal
        const lastNameA = a.dataset.lastname || '';
        const lastNameB = b.dataset.lastname || '';
        const firstNameA = a.dataset.firstname || '';
        const firstNameB = b.dataset.firstname || '';
        
        // Compare last names first
        const lastNameCompare = lastNameA.localeCompare(lastNameB);
        if (lastNameCompare !== 0) {
            return lastNameCompare;
        }
        
        // If last names are equal (or both empty), compare first names
        return firstNameA.localeCompare(firstNameB);
    });
    
    tbody.innerHTML = '';
    rows.forEach(row => tbody.appendChild(row));
}

function sortByDate() {
    const tbody = document.querySelector('tbody');
    const rows = Array.from(tbody.children);
    
    rows.sort((a, b) => {
        const dateA = a.dataset.date || '';
        const dateB = b.dataset.date || '';
        
        // Handle various date formats
        const parseDate = (dateStr) => {
            if (!dateStr || dateStr === 'Awaited' || dateStr === 'Unknown') return new Date(0);
            
            // Try to parse different date formats
            const cleaned = dateStr.replace(/[^\d\/\-]/g, '');
            const date = new Date(cleaned);
            return isNaN(date.getTime()) ? new Date(0) : date;
        };
        
        return parseDate(dateA) - parseDate(dateB);
    });
    
    tbody.innerHTML = '';
    rows.forEach(row => tbody.appendChild(row));
}

function sortByRow() {
    const tbody = document.querySelector('tbody');
    const rows = Array.from(tbody.children);
    
    rows.sort((a, b) => {
        const rowCodeA = a.dataset.rowcode || '';
        const rowCodeB = b.dataset.rowcode || '';
        
        // Handle empty values
        if (!rowCodeA) return 1;
        if (!rowCodeB) return -1;
        
        // Compare row codes alphabetically
        return rowCodeA.localeCompare(rowCodeB);
    });
    
    tbody.innerHTML = '';
    rows.forEach(row => tbody.appendChild(row));
}

// Search functionality
document.getElementById('searchInput').addEventListener('input', function(e) {
    const searchTerm = e.target.value.toLowerCase();
    const rows = document.querySelectorAll('.burial-row');
    
    rows.forEach(row => {
        const name = row.dataset.name || '';
        const lastname = row.dataset.lastname || '';
        const firstname = row.dataset.firstname || '';
        const text = row.textContent.toLowerCase();
        
        if (name.includes(searchTerm) || lastname.includes(searchTerm) || firstname.includes(searchTerm) || text.includes(searchTerm)) {
            row.style.display = 'table-row';
        } else {
            row.style.display = 'none';
        }
    });
});

// Modal functions
function openBurialModal(row) {
    const modal = document.getElementById('burialModal');
    const title = document.getElementById('modalTitle');
    const content = document.getElementById('modalContent');
    
    // Helper function to escape HTML and check if value exists
    function escapeHtml(text) {
        if (!text || text.trim() === '' || text.trim() === '-') return null;
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
    
    // Get all data from the row data attributes
    const cells = row.querySelectorAll('td');
    const data = {
        fullName: row.dataset.fullname || 'Unknown',
        lastName: cells[1]?.textContent.trim() || '',
        firstName: cells[2]?.textContent.trim() || '',
        deathDate: row.dataset.date,
        rowCode: row.dataset.rowcode,
        fileName: row.dataset.filename,
        graveCode: row.dataset.gravecode,
        plotCode: row.dataset.plotcode,
        age: row.dataset.age,
        namesOnHeadstone: row.dataset.namesonheadstone,
        stoneInscription: row.dataset.stoneinscription,
        stoneDesign: row.dataset.stonedesign,
        headstoneShape: row.dataset.headstoneshape,
        burialDate: row.dataset.burialdate,
        months: row.dataset.months,
        status: row.dataset.status,
        occupation: row.dataset.occupation,
        address: row.dataset.address,
        witness: row.dataset.witness,
        comments: row.dataset.comments
    };
    
    // Set title
    title.textContent = data.fullName;
    
    // Build content
    let contentHTML = '<div class="space-y-4">';
    
    // Display image if available (show at top)
    if (data.fileName && data.fileName.trim()) {
        const pathParts = window.location.pathname.split('/').filter(p => p);
        const basePath = pathParts.length > 1 ? '/' + pathParts[0] : '';
        const imagePath = `${basePath}/assets/imgs/graves/${data.fileName}`;
        contentHTML += `
            <div class="mb-4 border-b border-stone-200 dark:border-gray-600 pb-4">
                <h3 class="text-lg font-semibold mb-2 text-stone-800 dark:text-white">Grave Image</h3>
                <img src="${imagePath}" alt="Grave image for ${escapeHtml(data.fullName) || 'Unknown'}" 
                     class="w-full max-w-lg mx-auto rounded-lg shadow-lg border border-stone-300 dark:border-gray-600"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block'; console.error('Image failed to load:', '${imagePath}');">
                <p class="text-red-500 text-sm mt-2 hidden">Image not found: ${escapeHtml(data.fileName) || ''}<br>Attempted path: ${imagePath}</p>
            </div>
        `;
    }
    
    // Display all data fields - Basic Information Section
    contentHTML += '<div class="border-b border-stone-200 dark:border-gray-600 pb-3"><h3 class="text-lg font-semibold mb-2 text-stone-800 dark:text-white">Basic Information</h3>';
    
    if (data.rowCode && data.rowCode.trim()) {
        contentHTML += `<div class="mb-2"><strong>Row Code:</strong> <span class="inline-block px-2 py-1 rounded font-semibold text-stone-800" style="background-color: ${getRowCodeColor(data.rowCode)};">${escapeHtml(data.rowCode)}</span></div>`;
    }
    
    if (escapeHtml(data.graveCode)) {
        contentHTML += `<div class="mb-2"><strong>Grave Code:</strong> ${escapeHtml(data.graveCode)}</div>`;
    }
    
    if (escapeHtml(data.plotCode)) {
        contentHTML += `<div class="mb-2"><strong>Plot Code:</strong> ${escapeHtml(data.plotCode)}</div>`;
    }
    
    if (escapeHtml(data.lastName)) {
        contentHTML += `<div class="mb-2"><strong>Last Name:</strong> ${escapeHtml(data.lastName)}</div>`;
    }
    
    if (escapeHtml(data.firstName)) {
        contentHTML += `<div class="mb-2"><strong>First Name:</strong> ${escapeHtml(data.firstName)}</div>`;
    }
    
    if (data.fullName && data.fullName !== 'Unknown') {
        contentHTML += `<div class="mb-2"><strong>Full Name:</strong> ${escapeHtml(data.fullName)}</div>`;
    }
    
    if (escapeHtml(data.age)) {
        contentHTML += `<div class="mb-2"><strong>Age:</strong> ${escapeHtml(data.age)}</div>`;
    }
    
    if (data.deathDate && data.deathDate !== 'Awaited' && data.deathDate !== 'Unknown' && data.deathDate.trim()) {
        contentHTML += `<div class="mb-2"><strong>Death Date:</strong> ${escapeHtml(data.deathDate)}</div>`;
    } else {
        contentHTML += `<div class="mb-2"><strong>Death Date:</strong> <span class="text-stone-400">Unknown</span></div>`;
    }
    
    if (escapeHtml(data.burialDate)) {
        contentHTML += `<div class="mb-2"><strong>Burial Date:</strong> ${escapeHtml(data.burialDate)}</div>`;
    }
    
    if (escapeHtml(data.months)) {
        contentHTML += `<div class="mb-2"><strong>Months:</strong> ${escapeHtml(data.months)}</div>`;
    }
    
    if (escapeHtml(data.status)) {
        contentHTML += `<div class="mb-2"><strong>Status:</strong> ${escapeHtml(data.status)}</div>`;
    }
    
    if (escapeHtml(data.occupation)) {
        contentHTML += `<div class="mb-2"><strong>Occupation:</strong> ${escapeHtml(data.occupation)}</div>`;
    }
    
    if (escapeHtml(data.address)) {
        contentHTML += `<div class="mb-2"><strong>Address:</strong> ${escapeHtml(data.address)}</div>`;
    }
    
    if (escapeHtml(data.witness)) {
        contentHTML += `<div class="mb-2"><strong>Witness:</strong> ${escapeHtml(data.witness)}</div>`;
    }
    
    contentHTML += '</div>';
    
    // Headstone Information Section
    if (escapeHtml(data.namesOnHeadstone) || escapeHtml(data.stoneInscription) || escapeHtml(data.stoneDesign) || escapeHtml(data.headstoneShape)) {
        contentHTML += '<div class="border-b border-stone-200 dark:border-gray-600 pb-3 mt-4"><h3 class="text-lg font-semibold mb-2 text-stone-800 dark:text-white">Headstone Information</h3>';
        
        if (escapeHtml(data.namesOnHeadstone)) {
            contentHTML += `<div class="mb-2"><strong>Names on Headstone:</strong> ${escapeHtml(data.namesOnHeadstone)}</div>`;
        }
        
        if (escapeHtml(data.stoneInscription)) {
            contentHTML += `<div class="mb-2"><strong>Stone Inscription:</strong> <span class="italic">${escapeHtml(data.stoneInscription)}</span></div>`;
        }
        
        if (escapeHtml(data.stoneDesign)) {
            contentHTML += `<div class="mb-2"><strong>Stone Design:</strong> ${escapeHtml(data.stoneDesign)}</div>`;
        }
        
        if (escapeHtml(data.headstoneShape)) {
            contentHTML += `<div class="mb-2"><strong>Headstone Shape:</strong> ${escapeHtml(data.headstoneShape)}</div>`;
        }
        
        contentHTML += '</div>';
    }
    
    // Comments Section
    if (escapeHtml(data.comments)) {
        contentHTML += '<div class="mt-4"><h3 class="text-lg font-semibold mb-2 text-stone-800 dark:text-white">Additional Notes</h3>';
        contentHTML += `<div class="mb-2 text-stone-700 dark:text-gray-300 whitespace-pre-wrap">${escapeHtml(data.comments)}</div>`;
        contentHTML += '</div>';
    }
    
    contentHTML += '</div>';
    
    content.innerHTML = contentHTML;
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

// Helper function to get row code color
function getRowCodeColor(rowCode) {
    const colors = {
        'A': 'rgb(255, 255, 153)',
        'B': 'rgb(255, 153, 255)',
        'C': 'rgb(97, 203, 243)',
        'D': 'rgb(0, 176, 240)',
        'E': 'rgb(255, 192, 0)',
        'F': 'rgb(0, 204, 102)',
        'G': 'rgb(255, 0, 0)',
        'H': 'rgb(153, 153, 255)',
        'I': 'rgb(0, 204, 0)',
        'J': 'rgb(255, 153, 51)',
        'K': 'rgb(112, 168, 224)',
        'L': 'rgb(255, 204, 255)',
        'M': 'rgb(255, 255, 0)',
        'N': 'rgb(146, 208, 80)',
        'O': 'rgb(153, 102, 255)',
        'P': 'rgb(0, 176, 240)',
        'Q': 'rgb(60, 125, 34)',
        'R': 'rgb(153, 102, 255)',
        'S': 'rgb(146, 208, 80)',
        'T': 'rgb(255, 51, 153)',
        'U': 'rgb(255, 153, 51)',
        'V': 'rgb(0, 176, 240)'
    };
    return colors[rowCode.toUpperCase()] || 'transparent';
}

function closeBurialModal() {
    const modal = document.getElementById('burialModal');
    modal.classList.add('hidden');
    document.body.style.overflow = 'auto';
}

// Close modal when clicking outside
document.getElementById('burialModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeBurialModal();
    }
});

// Close modal with escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeBurialModal();
    }
});
</script>